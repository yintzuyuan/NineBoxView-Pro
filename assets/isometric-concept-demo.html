<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NineBoxView Pro 等角投影概念圖 - 互動展示</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f8f6f3;
      --bg-subtle: #edeae5;
      --text: #2c2c2c;
      --text-muted: #6b6b6b;
      --accent: #8b7355;

      /* 層級色彩 - 受活字印刷鋅版啟發，帶微透明 */
      --layer-edit-fill: rgba(232, 228, 222, 0.92);
      --layer-edit-stroke: #c4beb4;
      --layer-reference-fill: rgba(212, 207, 198, 0.88);
      --layer-reference-stroke: #a8a298;
      --layer-locked-fill: rgba(191, 185, 173, 0.85);
      --layer-locked-stroke: #8c867a;

      --glyph-edit: #9a9488;
      --glyph-reference: #5c574d;
      --glyph-locked: #2c2824;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #1a1918;
        --bg-subtle: #252422;
        --text: #e8e4de;
        --text-muted: #8a8680;
        --accent: #c4a882;

        --layer-edit-fill: rgba(42, 40, 38, 0.92);
        --layer-edit-stroke: #3d3a36;
        --layer-reference-fill: rgba(58, 55, 51, 0.88);
        --layer-reference-stroke: #524e48;
        --layer-locked-fill: rgba(74, 70, 64, 0.85);
        --layer-locked-stroke: #6a655c;

        --glyph-edit: #5c5850;
        --glyph-reference: #a09888;
        --glyph-locked: #d4cfc6;
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Source Serif 4", "Noto Serif TC", Georgia, serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      min-height: 100vh;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    h1 {
      text-align: center;
      font-weight: 600;
      font-size: 1.75rem;
      letter-spacing: 0.08em;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .subtitle {
      text-align: center;
      color: var(--text-muted);
      font-size: 0.95rem;
      letter-spacing: 0.02em;
    }

    /* 滾動提示區 */
    .spacer {
      height: 60vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
    }

    .scroll-hint {
      font-size: 0.85rem;
      color: var(--text-muted);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .scroll-arrow {
      width: 24px;
      height: 24px;
      border: 2px solid var(--accent);
      border-top: none;
      border-left: none;
      transform: rotate(45deg);
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: rotate(45deg) translateY(0); }
      40% { transform: rotate(45deg) translateY(8px); }
      60% { transform: rotate(45deg) translateY(4px); }
    }

    /* SVG 容器 */
    .svg-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 4rem 2rem;
      background: var(--bg-subtle);
      border-top: 1px solid var(--layer-edit-stroke);
      border-bottom: 1px solid var(--layer-edit-stroke);
    }

    .svg-container svg {
      max-width: 100%;
      height: auto;
    }

    /* 控制區 */
    .controls {
      text-align: center;
      padding: 2rem;
    }

    .controls button {
      padding: 0.75rem 2rem;
      font-family: inherit;
      font-size: 0.9rem;
      letter-spacing: 0.05em;
      border: 1px solid var(--accent);
      border-radius: 2px;
      background: transparent;
      color: var(--accent);
      cursor: pointer;
      margin: 0.5rem;
      transition: all 0.3s ease;
    }

    .controls button:hover {
      background: var(--accent);
      color: var(--bg);
    }

    .lang-buttons {
      margin-top: 1.5rem;
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .lang-buttons button {
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
      border-color: var(--layer-reference-stroke);
      color: var(--text-muted);
    }

    .lang-buttons button:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: transparent;
    }

    .lang-buttons button.active {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--bg);
    }

    /* 多語言字型 */
    [lang="zh-Hant"] .glyph { font-family: "Noto Serif TC", "Songti TC", serif; }
    [lang="zh-Hans"] .glyph { font-family: "Noto Serif SC", "Songti SC", serif; }
    [lang="ja"] .glyph { font-family: "Noto Serif JP", "Hiragino Mincho ProN", serif; }
    [lang="ko"] .glyph { font-family: "Noto Serif KR", "Batang", serif; }

    .spacer-bottom {
      height: 40vh;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>NineBoxView Pro</h1>
  <p class="subtitle">三層堆疊九宮格概念圖</p>
</div>

<div class="spacer">
  <span class="scroll-hint">向下滾動</span>
  <div class="scroll-arrow"></div>
</div>

<div class="svg-container">
  <!-- 內嵌 SVG - 等角投影三層九宮格 -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 600" width="500" height="600"
       role="img" aria-label="NineBoxView Pro 三層九宮格概念圖" class="isometric-concept">
    <title>NineBoxView Pro 等角投影概念圖</title>
    <desc>展示三層堆疊的九宮格：編輯層、參考層、鎖定層</desc>

    <defs>
      <!-- 層級投影陰影 -->
      <filter id="shadow-sm" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow dx="0" dy="3" stdDeviation="2" flood-color="#000" flood-opacity="0.08"/>
      </filter>
      <filter id="shadow-md" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow dx="0" dy="5" stdDeviation="4" flood-color="#000" flood-opacity="0.12"/>
      </filter>
      <filter id="shadow-lg" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow dx="0" dy="8" stdDeviation="6" flood-color="#000" flood-opacity="0.15"/>
      </filter>
    </defs>

    <style>
      .cell {
        stroke-width: 1.5;
      }
      .cell-edit {
        fill: var(--layer-edit-fill);
        stroke: var(--layer-edit-stroke);
      }
      .cell-reference {
        fill: var(--layer-reference-fill);
        stroke: var(--layer-reference-stroke);
      }
      .cell-locked {
        fill: var(--layer-locked-fill);
        stroke: var(--layer-locked-stroke);
      }

      .glyph {
        font-size: 26px;
        text-anchor: middle;
        dominant-baseline: central;
        font-family: "Noto Serif TC", "Songti TC", Georgia, serif;
        transition: opacity 300ms ease-in-out;
      }
      .glyph-edit { fill: var(--glyph-edit); }
      .glyph-reference { fill: var(--glyph-reference); }
      .glyph-locked { fill: var(--glyph-locked); }
      .glyph.fade-out { opacity: 0; }

      .layer-label {
        fill: var(--text-muted);
        font-size: 10px;
        font-family: "Source Serif 4", Georgia, serif;
        letter-spacing: 0.1em;
        text-transform: uppercase;
      }

      .layer-line {
        stroke: var(--text-muted);
        stroke-width: 0.5;
        stroke-dasharray: 2, 3;
        opacity: 0.5;
      }
    </style>

    <!-- 主容器 -->
    <g id="concept-diagram" transform="translate(270, 440)">

      <!-- ===== 第一層：編輯字層（底部）===== -->
      <g transform="translate(0, 0)" filter="url(#shadow-sm)">
        <g id="layer-edit" class="layer" data-layer="edit" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
          <!-- 九宮格格子 -->
          <rect class="cell cell-edit" x="0" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="54" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="108" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="0" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="54" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="108" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="0" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="54" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-edit" x="108" y="108" width="52" height="52" rx="2"/>

          <!-- 文字：9 格都是同一字「永」 -->
          <text class="glyph glyph-edit" data-layer="edit" data-position="0" x="26" y="26">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="1" x="80" y="26">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="2" x="134" y="26">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="3" x="26" y="80">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="4" x="80" y="80">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="5" x="134" y="80">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="6" x="26" y="134">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="7" x="80" y="134">永</text>
          <text class="glyph glyph-edit" data-layer="edit" data-position="8" x="134" y="134">永</text>
        </g>
      </g>

      <!-- ===== 第二層：參考字層（中間）===== -->
      <g transform="translate(0, -50)" filter="url(#shadow-md)">
        <g id="layer-reference" class="layer" data-layer="reference" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
          <rect class="cell cell-reference" x="0" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="54" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="108" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="0" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="54" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="108" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="0" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="54" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-reference" x="108" y="108" width="52" height="52" rx="2"/>

          <!-- 文字：中央空，周圍 8 格有字 -->
          <text class="glyph glyph-reference" data-layer="reference" data-position="0" x="26" y="26">酬</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="1" x="80" y="26">鷹</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="2" x="134" y="26">靈</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="3" x="26" y="80">風</text>
          <!-- 位置 4（中央）空 -->
          <text class="glyph glyph-reference" data-layer="reference" data-position="5" x="134" y="80">書</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="6" x="26" y="134">飛</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="7" x="80" y="134">語</text>
          <text class="glyph glyph-reference" data-layer="reference" data-position="8" x="134" y="134">東</text>
        </g>
      </g>

      <!-- ===== 第三層：鎖定字層（頂部）===== -->
      <g transform="translate(0, -100)" filter="url(#shadow-lg)">
        <g id="layer-locked" class="layer" data-layer="locked" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
          <rect class="cell cell-locked" x="0" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="54" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="108" y="0" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="0" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="54" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="108" y="54" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="0" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="54" y="108" width="52" height="52" rx="2"/>
          <rect class="cell cell-locked" x="108" y="108" width="52" height="52" rx="2"/>

          <!-- 文字：零星散落 -->
          <text class="glyph glyph-locked" data-layer="locked" data-position="0" x="26" y="26">鑫</text>
          <text class="glyph glyph-locked" data-layer="locked" data-position="2" x="134" y="26">龍</text>
          <text class="glyph glyph-locked" data-layer="locked" data-position="7" x="80" y="134">國</text>
        </g>
      </g>

      <!-- 層級標籤與連接線 -->
      <g class="labels">
        <line class="layer-line" x1="-145" y1="60" x2="-85" y2="60"/>
        <text class="layer-label" x="-150" y="63">編輯層</text>

        <line class="layer-line" x1="-145" y1="5" x2="-85" y2="5"/>
        <text class="layer-label" x="-150" y="8">參考層</text>

        <line class="layer-line" x1="-145" y1="-50" x2="-85" y2="-50"/>
        <text class="layer-label" x="-150" y="-47">鎖定層</text>
      </g>
    </g>
  </svg>
</div>

<div class="container">
  <div class="controls">
    <button id="playBtn">播放動畫</button>

    <div class="lang-buttons">
      <button data-lang="zh-Hant" class="active">繁體中文</button>
      <button data-lang="zh-Hans">简体中文</button>
      <button data-lang="ja">日本語</button>
      <button data-lang="ko">한국어</button>
    </div>
  </div>
</div>

<div class="spacer-bottom"></div>

<script src="js/isometric-animation.js"></script>
<script>
  // 手動播放按鈕
  document.getElementById('playBtn').addEventListener('click', function() {
    const svg = document.querySelector('.isometric-concept');
    if (window.IsometricAnimation) {
      window.IsometricAnimation.playAnimation(svg);
    }
  });

  // 語言切換按鈕
  document.querySelectorAll('.lang-buttons button').forEach(btn => {
    btn.addEventListener('click', function() {
      const lang = this.dataset.lang;
      document.documentElement.lang = lang;

      // 更新按鈕狀態
      document.querySelectorAll('.lang-buttons button').forEach(b => b.classList.remove('active'));
      this.classList.add('active');

      // 立即播放動畫展示效果
      const svg = document.querySelector('.isometric-concept');
      if (window.IsometricAnimation) {
        window.IsometricAnimation.playAnimation(svg);
      }
    });
  });
</script>

</body>
</html>
