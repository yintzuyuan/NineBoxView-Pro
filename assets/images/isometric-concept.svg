<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 600"
     role="img" aria-label="NineBoxView Pro 三層九宮格概念圖">
  <title>NineBoxView Pro 等角投影概念圖</title>
  <desc>展示三層堆疊的九宮格：編輯層、參考層、鎖定層</desc>

  <defs>
    <!-- 層級投影陰影 -->
    <filter id="shadow-sm" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="3" stdDeviation="2" flood-color="#000" flood-opacity="0.08"/>
    </filter>
    <filter id="shadow-md" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="5" stdDeviation="4" flood-color="#000" flood-opacity="0.12"/>
    </filter>
    <filter id="shadow-lg" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="8" stdDeviation="6" flood-color="#000" flood-opacity="0.15"/>
    </filter>
  </defs>

  <style>
    /* 層級色彩 - 受活字印刷鋅版啟發，帶微透明 */
    :root {
      --layer-edit-fill: rgba(232, 228, 222, 0.92);
      --layer-edit-stroke: #c4beb4;
      --layer-reference-fill: rgba(212, 207, 198, 0.88);
      --layer-reference-stroke: #a8a298;
      --layer-locked-fill: rgba(191, 185, 173, 0.85);
      --layer-locked-stroke: #8c867a;
      --glyph-edit: #9a9488;
      --glyph-reference: #5c574d;
      --glyph-locked: #2c2824;
      --text-muted: #6b6b6b;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --layer-edit-fill: rgba(42, 40, 38, 0.92);
        --layer-edit-stroke: #3d3a36;
        --layer-reference-fill: rgba(58, 55, 51, 0.88);
        --layer-reference-stroke: #524e48;
        --layer-locked-fill: rgba(74, 70, 64, 0.85);
        --layer-locked-stroke: #6a655c;
        --glyph-edit: #5c5850;
        --glyph-reference: #a09888;
        --glyph-locked: #d4cfc6;
        --text-muted: #8a8680;
      }
    }

    .cell {
      stroke-width: 1.5;
    }
    .cell-edit {
      fill: var(--layer-edit-fill);
      stroke: var(--layer-edit-stroke);
    }
    .cell-reference {
      fill: var(--layer-reference-fill);
      stroke: var(--layer-reference-stroke);
    }
    .cell-locked {
      fill: var(--layer-locked-fill);
      stroke: var(--layer-locked-stroke);
    }

    .glyph {
      font-size: 26px;
      text-anchor: middle;
      dominant-baseline: central;
      font-family: "Noto Serif TC", "Songti TC", Georgia, serif;
      transition: opacity 300ms ease-in-out;
    }
    .glyph-edit { fill: var(--glyph-edit); }
    .glyph-reference { fill: var(--glyph-reference); }
    .glyph-locked { fill: var(--glyph-locked); }
    .glyph.fade-out { opacity: 0; }

    .layer-label {
      fill: var(--text-muted);
      font-size: 10px;
      font-family: Georgia, serif;
      letter-spacing: 0.1em;
    }

    .layer-line {
      stroke: var(--text-muted);
      stroke-width: 0.5;
      stroke-dasharray: 2, 3;
      opacity: 0.5;
    }
  </style>

  <!-- 主容器 -->
  <g id="concept-diagram" transform="translate(270, 440)">

    <!-- ===== 第一層：編輯字層（底部）===== -->
    <g transform="translate(0, 0)" filter="url(#shadow-sm)">
      <g id="layer-edit" class="layer" data-layer="edit" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
        <rect class="cell cell-edit" x="0" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="54" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="108" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="0" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="54" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="108" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="0" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="54" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-edit" x="108" y="108" width="52" height="52" rx="2"/>

        <text class="glyph glyph-edit" data-layer="edit" data-position="0" x="26" y="26">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="1" x="80" y="26">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="2" x="134" y="26">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="3" x="26" y="80">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="4" x="80" y="80">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="5" x="134" y="80">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="6" x="26" y="134">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="7" x="80" y="134">永</text>
        <text class="glyph glyph-edit" data-layer="edit" data-position="8" x="134" y="134">永</text>
      </g>
    </g>

    <!-- ===== 第二層：參考字層（中間）===== -->
    <g transform="translate(0, -50)" filter="url(#shadow-md)">
      <g id="layer-reference" class="layer" data-layer="reference" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
        <rect class="cell cell-reference" x="0" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="54" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="108" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="0" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="54" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="108" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="0" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="54" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-reference" x="108" y="108" width="52" height="52" rx="2"/>

        <text class="glyph glyph-reference" data-layer="reference" data-position="0" x="26" y="26">酬</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="1" x="80" y="26">鷹</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="2" x="134" y="26">靈</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="3" x="26" y="80">風</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="5" x="134" y="80">書</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="6" x="26" y="134">飛</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="7" x="80" y="134">語</text>
        <text class="glyph glyph-reference" data-layer="reference" data-position="8" x="134" y="134">東</text>
      </g>
    </g>

    <!-- ===== 第三層：鎖定字層（頂部）===== -->
    <g transform="translate(0, -100)" filter="url(#shadow-lg)">
      <g id="layer-locked" class="layer" data-layer="locked" transform="matrix(1, 0.5, -1, 0.5, 0, 0)">
        <rect class="cell cell-locked" x="0" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="54" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="108" y="0" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="0" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="54" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="108" y="54" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="0" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="54" y="108" width="52" height="52" rx="2"/>
        <rect class="cell cell-locked" x="108" y="108" width="52" height="52" rx="2"/>

        <text class="glyph glyph-locked" data-layer="locked" data-position="0" x="26" y="26">鑫</text>
        <text class="glyph glyph-locked" data-layer="locked" data-position="2" x="134" y="26">龍</text>
        <text class="glyph glyph-locked" data-layer="locked" data-position="7" x="80" y="134">國</text>
      </g>
    </g>

    <!-- 層級標籤與連接線 -->
    <g class="labels">
      <line class="layer-line" x1="-145" y1="60" x2="-85" y2="60"/>
      <text class="layer-label" x="-150" y="63">編輯層</text>

      <line class="layer-line" x1="-145" y1="5" x2="-85" y2="5"/>
      <text class="layer-label" x="-150" y="8">參考層</text>

      <line class="layer-line" x1="-145" y1="-50" x2="-85" y2="-50"/>
      <text class="layer-label" x="-150" y="-47">鎖定層</text>
    </g>
  </g>
</svg>
